{{- range $index, $ip :=  .Values.externalIPs -}}
apiVersion: v1
kind: Service
metadata:
  name: {{ $.Release.Name }}-{{ $index }}
  labels:
    {{- include "staking.labels" $ | nindent 4 }}
spec:
  type: LoadBalancer
  loadBalancerIP: "{{ $ip }}"
  selector:
    {{- include "staking.selectorLabels" $ | nindent 4 }}
    statefulset.kubernetes.io/pod-name: {{ $.Release.Name }}-{{ $index }}

  ports:
    - name: sync
      port: 30303
      protocol: TCP
    - name: discovery
      port: 30303
      protocol: UDP
    - name: libp2p
      port: 13000
      protocol: TCP
    - name: discv5
      port: 12000
      protocol: UDP
---
{{- end }}
